<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
              http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="livros_por_autor"
              pageWidth="595"
              pageHeight="842"
              columnWidth="535"
              leftMargin="30"
              rightMargin="30"
              topMargin="20"
              bottomMargin="20"
              uuid="d94a1e87-b20f-4c4e-91eb-9a5f21d6b58e">

    <queryString>
        <![CDATA[SELECT * FROM vw_livros_autores_assuntos ORDER BY autor_nome, titulo]]>
    </queryString>

    <field name="autor_nome" class="java.lang.String"/>
    <field name="titulo" class="java.lang.String"/>
    <field name="editora" class="java.lang.String"/>
    <field name="edicao" class="java.lang.Integer"/>
    <field name="ano_publicacao" class="java.lang.String"/>
    <field name="valor" class="java.math.BigDecimal"/>
    <field name="assunto" class="java.lang.String"/>

    <!-- Agrupamento por autor -->
    <group name="AutorGroup">
        <groupExpression><![CDATA[$F{autor_nome}]]></groupExpression>
        <groupHeader>
            <band height="20">
                <textField>
                    <reportElement x="0" y="0" width="515" height="20" backcolor="#E6E6E6" mode="Opaque"/>
                    <textElement>
                        <font fontName="SansSerif" size="11" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA["Autor: " + $F{autor_nome}]]></textFieldExpression>
                </textField>
            </band>
            <band height="18">
                <!-- CabeÃ§alhos das colunas -->
                <staticText>
                    <reportElement x="0" y="0" width="150" height="18" backcolor="#F0F0F0" mode="Opaque"/>
                    <textElement textAlignment="Left">
                        <font size="9" isBold="true"/>
                    </textElement>
                    <text><![CDATA[TÃ­tulo]]></text>
                </staticText>
                <staticText>
                    <reportElement x="155" y="0" width="120" height="18" backcolor="#F0F0F0" mode="Opaque"/>
                    <textElement textAlignment="Left">
                        <font size="9" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Editora]]></text>
                </staticText>
                <staticText>
                    <reportElement x="280" y="0" width="35" height="18" backcolor="#F0F0F0" mode="Opaque"/>
                    <textElement textAlignment="Center">
                        <font size="9" isBold="true"/>
                    </textElement>
                    <text><![CDATA[EdiÃ§Ã£o]]></text>
                </staticText>
                <staticText>
                    <reportElement x="320" y="0" width="40" height="18" backcolor="#F0F0F0" mode="Opaque"/>
                    <textElement textAlignment="Center">
                        <font size="9" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Ano]]></text>
                </staticText>
                <staticText>
                    <reportElement x="365" y="0" width="60" height="18" backcolor="#F0F0F0" mode="Opaque"/>
                    <textElement textAlignment="Right">
                        <font size="9" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Valor]]></text>
                </staticText>
                <staticText>
                    <reportElement x="430" y="0" width="85" height="18" backcolor="#F0F0F0" mode="Opaque"/>
                    <textElement textAlignment="Left">
                        <font size="9" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Assunto]]></text>
                </staticText>
            </band>
        </groupHeader>
    </group>

    <!-- TÃ­tulo -->
    <title>
        <band height="40">
            <staticText>
                <reportElement x="0" y="0" width="515" height="30"/>
                <textElement textAlignment="Center">
                    <font fontName="SansSerif" size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[ðŸ“š RelatÃ³rio de Livros por Autor]]></text>
            </staticText>
        </band>
    </title>

    <!-- Detalhes dos livros -->
    <detail>
        <band height="20">
            <textField>
                <reportElement x="0" y="0" width="150" height="20"/>
                <textElement><font fontName="SansSerif" size="10"/></textElement>
                <textFieldExpression><![CDATA[$F{titulo}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="155" y="0" width="120" height="20"/>
                <textElement><font fontName="SansSerif" size="10"/></textElement>
                <textFieldExpression><![CDATA[$F{editora}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="280" y="0" width="35" height="20"/>
                <textElement textAlignment="Right"><font fontName="SansSerif" size="10"/></textElement>
                <textFieldExpression><![CDATA[$F{edicao}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="320" y="0" width="40" height="20"/>
                <textElement textAlignment="Right"><font fontName="SansSerif" size="10"/></textElement>
                <textFieldExpression><![CDATA[$F{ano_publicacao}]]></textFieldExpression>
            </textField>
            <textField pattern="Â¤ #,##0.00">
                <reportElement x="365" y="0" width="60" height="20"/>
                <textElement textAlignment="Right"><font fontName="SansSerif" size="10"/></textElement>
                <textFieldExpression><![CDATA[$F{valor}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="430" y="0" width="85" height="20"/>
                <textElement textAlignment="Center"><font fontName="SansSerif" size="10"/></textElement>
                <textFieldExpression><![CDATA[$F{assunto}]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <!-- RodapÃ© -->
    <pageFooter>
        <band height="20">
            <textField>
                <reportElement x="0" y="0" width="250" height="20"/>
                <textElement textAlignment="Left" verticalAlignment="Middle">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA["Gerado em: " + new java.util.Date()]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="415" y="0" width="100" height="20"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA["PÃ¡gina " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>

</jasperReport>
